[package]
name = "kreuzberg-ffi"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
description = "C FFI bindings for Kreuzberg document intelligence library"
license.workspace = true
repository = "https://github.com/kreuzberg-dev/kreuzberg"
homepage = "https://kreuzberg.dev"
documentation = "https://docs.rs/kreuzberg-ffi"
readme = "README.md"
keywords = ["ffi", "bindings", "document", "extraction", "api"]
categories = ["development-tools::ffi", "text-processing"]

[lib]
crate-type = ["cdylib", "staticlib", "rlib"]

[features]
# Mirror embeddings feature availability from kreuzberg dependency
embeddings = []
# Optional rayon for parallel batch processing
rayon = ["dep:rayon"]
# Re-export kreuzberg features for downstream conditional compilation
pdf = []
keywords-yake = []
keywords-rake = []

[dependencies]
serde_json = { workspace = true }
serde = { workspace = true }
async-trait = { workspace = true }
tokio = { workspace = true }
html-to-markdown-rs = { version = "2.15.0", default-features = false }
rayon = { version = "1.11", optional = true }

# On Windows MinGW, disable embeddings/ort since ONNX Runtime is not available
# in MinGW-compatible form. Use all other features but exclude embeddings.
[target.'cfg(all(windows, target_env = "gnu"))'.dependencies]
kreuzberg = { path = "../kreuzberg", features = [
    "pdf",
    "excel",
    "office",
    "email",
    "html",
    "xml",
    "archives",
    "ocr",
    "language-detection",
    "chunking",
    "quality",
    "keywords",
    "api",
    "mcp",
    "otel",
    "bundled-pdfium",
] }

[target.'cfg(not(all(windows, target_env = "gnu")))'.dependencies]
kreuzberg = { path = "../kreuzberg", features = ["full", "bundled-pdfium"] }

[build-dependencies]
cbindgen = "0.29"

[dev-dependencies]
tempfile = { workspace = true }
criterion = { version = "0.8", features = ["html_reports"] }

[[bench]]
name = "result_view_benchmark"
harness = false
