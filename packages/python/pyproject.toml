[build-system]
build-backend = "build"
requires = [ "maturin>=1,<2" ]
backend-path = [ "." ]

[project]
name = "kreuzberg"
version = "4.0.0-rc.7"
description = "High-performance document intelligence library for Python. Extract text, metadata, and structured data from PDFs, Office documents, images, and 50+ formats. Powered by Rust core for 10-50x speed improvements."
readme = "README.md"
keywords = [
  "document-extraction",
  "document-intelligence",
  "document-parsing",
  "document-processing",
  "docx",
  "easyocr",
  "email-parsing",
  "html",
  "markdown",
  "metadata-extraction",
  "ocr",
  "office-documents",
  "paddleocr",
  "pdf",
  "pdf-extraction",
  "performance",
  "pptx",
  "rust",
  "table-extraction",
  "tesseract",
  "text-extraction",
  "xlsx",
  "xml",
]
license = { text = "MIT" }
maintainers = [ { name = "Na'aman Hirschfeld", email = "nhirschfeld@gmail.com" } ]
authors = [ { name = "Na'aman Hirschfeld", email = "nhirschfeld@gmail.com" } ]
requires-python = ">=3.10"
classifiers = [
  "Development Status :: 4 - Beta",
  "Intended Audience :: Developers",
  "Intended Audience :: Information Technology",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Programming Language :: Python :: Implementation :: CPython",
  "Programming Language :: Rust",
  "Topic :: Office/Business",
  "Topic :: Scientific/Engineering :: Information Analysis",
  "Topic :: Software Development :: Libraries :: Python Modules",
  "Topic :: Text Processing",
  "Topic :: Text Processing :: Filters",
  "Topic :: Text Processing :: General",
  "Typing :: Typed",
]

dependencies = [  ]

optional-dependencies.all = [
  "kreuzberg[easyocr,paddleocr]",
]
optional-dependencies.easyocr = [
  "easyocr>=1.7.2; python_version<'3.14'",
  "torch>=2.9.1; python_version<'3.14'",
]
optional-dependencies.paddleocr = [
  "paddleocr>=3.3.2; python_version<'3.14'",
  "paddlepaddle>=3.2.1,<3.2.2; python_version<'3.14'",
  "setuptools>=80.9; python_version<'3.14'",
]
urls.Changelog = "https://kreuzberg.dev/CHANGELOG/"
urls.Documentation = "https://kreuzberg.dev"
urls.Homepage = "https://kreuzberg.dev"
urls.Issues = "https://github.com/kreuzberg-dev/kreuzberg/issues"
urls.Repository = "https://github.com/kreuzberg-dev/kreuzberg"
urls.Source = "https://github.com/kreuzberg-dev/kreuzberg"
scripts.kreuzberg = "kreuzberg.__main__:main"

[tool.maturin]
module-name = "kreuzberg._internal_bindings"
# Point to the PyO3 bindings crate
manifest-path = "../../crates/kreuzberg-py/Cargo.toml"
# Include pdfium native libraries and CLI binary for all platforms
include = [
  { path = "kreuzberg/pdfium.dll", format = "wheel" },
  { path = "kreuzberg/libpdfium.dylib", format = "wheel" },
  { path = "kreuzberg/libpdfium.so", format = "wheel" },
  # Include the CLI binary (must be built with --features all)
  { path = "kreuzberg/kreuzberg-cli", format = "wheel" },
  { path = "kreuzberg/kreuzberg-cli.exe", format = "wheel" },
]

[tool.pytest.ini_options]
asyncio_mode = "auto"
timeout = 60
timeout_method = "thread"
markers = [
  "slow: marks tests as slow (deselect with '-m \"not slow\"')",
  "windows_slow: marks tests as too slow on Windows CI (deselect with '-m \"not windows_slow\"')",
  "integration: marks tests as integration tests (requires running services)",
  "cli_features: marks tests that require CLI binary built with --features all (deselect with '-m \"not cli_features\"')",
]
# Timeout exceptions are ignored by default, re-raise them
timeout_func_only = true
