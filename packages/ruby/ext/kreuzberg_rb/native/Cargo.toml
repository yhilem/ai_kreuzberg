# This crate is excluded from the workspace to use a vendored kreuzberg crate for gem packaging
[workspace]

[patch.crates-io]
# Patch rb-sys to fix Windows i32/i64 type mismatch in tracking_allocator.rs
rb-sys = { path = "../../../vendor/rb-sys" }

[package]
name = "kreuzberg-rb"
version = "4.0.0-rc.7"
edition = "2024"
rust-version = "1.91"
authors = ["Na'aman Hirschfeld <nhirschfeld@gmail.com>"]
license = "MIT"
repository = "https://github.com/kreuzberg-dev/kreuzberg"
homepage = "https://kreuzberg.dev"
documentation = "https://docs.rs/kreuzberg"
readme = "README.md"
description = "Ruby bindings (Magnus) for Kreuzberg - high-performance document intelligence framework"
keywords = ["ruby", "magnus", "document", "extraction", "bindings"]
categories = ["api-bindings", "text-processing"]

[lib]
name = "kreuzberg_rb"
crate-type = ["cdylib", "rlib"]

[features]
default = []

[dependencies]
async-trait = "0.1.89"
kreuzberg = { path = "../../../vendor/kreuzberg", features = ["full", "embeddings"] }
kreuzberg-ffi = { path = "../../../vendor/kreuzberg-ffi", features = ["embeddings"] }
magnus = { git = "https://github.com/matsadler/magnus", rev = "f6db11769efb517427bf7f121f9c32e18b059b38", features = [
    "rb-sys",
] }
rb-sys = { version = "0.9.119", default-features = false, features = [
    "stable-api-compiled-fallback",
] }
serde_json = "1.0.145"
tokio = { version = "1.48.0", features = [
    "rt",
    "rt-multi-thread",
    "macros",
    "sync",
    "process",
    "fs",
    "time",
    "io-util",
] }
html-to-markdown-rs = { version = "2.14.1", default-features = false }

[dev-dependencies]
pretty_assertions = "1.4"
